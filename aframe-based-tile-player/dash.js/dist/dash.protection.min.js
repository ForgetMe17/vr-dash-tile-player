/*! v3.2.1-, 2021-03-25T13:26:20Z */
!function(e){var t;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dashjs||(t.dashjs={})).Protection=e()}(function(){return function r(s,i,a){function o(t,e){if(!i[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},s[t][0].call(n.exports,function(e){return o(s[t][1][e]||e)},n,n.exports,r,s,i,a)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var s=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"mixin",value:function(e,t,n){var r,s={};if(e)for(var i in t)t.hasOwnProperty(i)&&(r=t[i],i in e&&(e[i]===r||i in s&&s[i]===r)||("object"==typeof e[i]&&null!==e[i]?e[i]=a.mixin(e[i],r,n):e[i]=n(r)));return e}},{key:"clone",value:function(e){if(!e||"object"!=typeof e)return e;var t=void 0;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;++n)n in e&&t.push(a.clone(e[n]))}else t={};return a.mixin(t,e,a.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,e){try{var t=function(){if(!e||0===e.length)return{v:n};var t=new URL(n);return e.forEach(function(e){e.key&&e.value&&t.searchParams.set(e.key,e.value)}),{v:t.href}}();if("object"==typeof t)return t.v}catch(e){return n}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,s=n.length;r<s;r++){var i=n[r],a=i.indexOf(": ");0<a&&(t[i.substring(0,a)]=i.substring(a+2))}return t}},{key:"generateUuid",value:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t|=0}return t}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=s,t.exports=n.default},{}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var s=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,s=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||s&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}n.default=s,t.exports=n.default},{}],3:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var s=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,s=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||s&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}n.default=s,t.exports=n.default},{}],4:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var i=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(s,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),s);n.default=i,t.exports=n.default},{}],5:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var s=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){t=i.parsePSSHList(t);return e&&t.hasOwnProperty(e.uuid.toLowerCase())?t[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var s,i,a=void 0,o=r;if(r>=t.buffer.byteLength)break;if(s=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(i=t.getUint8(r))||1===i){r++,r+=3,a="";for(var u=void 0,l=void 0,u=0;u<4;u++)a+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,a+="-",u=0;u<2;u++)a+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,a+="-",u=0;u<2;u++)a+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,a+="-",u=0;u<2;u++)a+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,a+="-",u=0;u<6;u++)a+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,a=a.toLowerCase(),t.getUint32(r),r+=4,n[a]=t.buffer.slice(o,s),r=s}else r=s;else r=s}return n}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}n.default=s,t.exports=n.default},{}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e(8)),f=r(e(9)),s=r(e(7)),i=r(e(14)),y=r(e(16)),S=r(e(17)),_=r(e(15)),g=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],h=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function a(){var l=void 0,E=this.context;function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return l={createProtectionSystem:function(e){var t=null,n=(0,f.default)(E).getInstance();n.setConfig({debug:e.debug,BASE64:e.BASE64}),n.initialize();var r,s,i,a,o,u=(r=(u=e).debug,s=r.getLogger(l),i=u.eventBus,a=u.errHandler,(o=u.videoModel?u.videoModel.getElement():null)&&void 0===o.onencrypted||o&&void 0===o.mediaKeys?c(o,h)?(s.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,S.default)(E).create({debug:r,eventBus:i,events:u.events,api:c(o,h)})):c(o,g)?(s.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,_.default)(E).create({debug:r,eventBus:i,errHandler:a,events:u.events,api:c(o,g)})):(s.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(s.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,y.default)(E).create({debug:r,eventBus:i,events:u.events})));return!t&&u&&(t=(0,d.default)(E).create({protectionModel:u,protectionKeyController:n,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants,cmcdModel:e.cmcdModel}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}a.__dashjs_factory_name="Protection";e=dashjs.FactoryMaker.getClassFactory(a);e.events=s.default,e.errors=i.default,dashjs.FactoryMaker.updateClassFactory(a.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{14:14,15:15,16:16,17:17,7:7,8:8,9:9}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var s=e,i=t,a=n,r=!1;null===s&&(s=Function.prototype);var o=Object.getOwnPropertyDescriptor(s,i);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(a)}s=Object.getPrototypeOf(s);if(null===s)return;e=s,t=i,n=a,r=!0,o=void 0}};var s,i=e(3);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((s=i)&&s.__esModule?s:{default:s})["default"]),a);n.default=e,t.exports=n.default},{3:3}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var k=r(e(5)),L=r(e(29)),Y=r(e(26)),P=r(e(14)),U=r(e(31)),x=r(e(27)),G=r(e(28)),j=e(32),F=r(e(1));function s(e){var t,p=(e=e||{}).protectionKeyController,v=e.protectionModel,R=e.eventBus,D=e.events,n=e.debug,E=e.BASE64,o=e.constants,s=[],m=e.cmcdModel,M=void 0,c=void 0,C=void 0,i=void 0,r=void 0,u=void 0,T=void 0,A=void 0,I=void 0;function a(){if(!(R&&R.hasOwnProperty("on")&&p&&p.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function d(e,t){var n=k.default.getPSSHForKeySystem(T,e),r=K(T);if(n){if(l(n))return;try{v.createKeySession(n,r,_(T),t)}catch(e){R.trigger(D.KEY_SESSION_CREATED,{data:null,error:new U.default(P.default.KEY_SESSION_CREATED_ERROR_CODE,P.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?v.createKeySession(e,r,_(T),t):R.trigger(D.KEY_SESSION_CREATED,{data:null,error:new U.default(P.default.KEY_SESSION_CREATED_ERROR_CODE,P.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(T?T.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function l(e){if(e)try{for(var t=v.getAllInitData(),n=0;n<t.length;n++)if(p.initDataEquals(e,t[n]))return M.debug("DRM: Ignoring initData because we have already seen it!"),1;return}catch(e){return}}function f(e,t){a(),v.loadKeySession(e,t,_(T))}function y(e){a(),e?(v.setMediaElement(e),R.on(D.NEED_KEY,b,this)):null===e&&(v.setMediaElement(e),R.off(D.NEED_KEY,b,this))}function K(e){var t=null;return e&&(e=e.systemString,i&&(t=e in i?i[e]:null)),t}function S(e){var t=K(e),n=[],r=[],s=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:u,i=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:u,a=_(e),e=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",t=t&&t.persistentState?t.persistentState:"temporary"===a?"optional":"required";return C.forEach(function(e){e.type===o.AUDIO?n.push(new L.default(e.codec,s)):e.type===o.VIDEO&&r.push(new L.default(e.codec,i))}),new Y.default(n,r,e,t,[a])}function _(e){e=K(e);return e&&e.sessionType?e.sessionType:r}function g(n,e){n=n.sort(function(e,t){return(i&&i[e.ks.systemString]&&0<=i[e.ks.systemString].priority?i[e.ks.systemString].priority:n.length)-(i&&i[t.ks.systemString]&&0<=i[t.ks.systemString].priority?i[t.ks.systemString].priority:n.length)}),void 0===T?function(e,i){var a=this,t=[],o=void 0;T=null,c.push(e);for(var n=0;n<e.length;n++)t.push({ks:e[n].ks,configs:[S(e[n].ks)]});function u(e){R.off(D.KEY_SYSTEM_ACCESS_COMPLETE,u,a),e.error?(T=void 0,R.off(D.INTERNAL_KEY_SYSTEM_SELECTED,r,a),i||R.trigger(D.KEY_SYSTEM_SELECTED,{data:null,error:new U.default(P.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,P.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(l=e.data,M.info("DRM: KeySystem Access Granted ("+l.keySystem.systemString+")!  Selecting key system..."),v.selectKeySystem(l))}var l=void 0,r=function e(t){if(R.off(D.INTERNAL_KEY_SYSTEM_SELECTED,e,a),R.off(D.KEY_SYSTEM_ACCESS_COMPLETE,u,a),t.error)T=void 0,i||R.trigger(D.KEY_SYSTEM_SELECTED,{data:null,error:new U.default(P.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,P.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)});else{if(!v)return;T=v.getKeySystem(),R.trigger(D.KEY_SYSTEM_SELECTED,{data:l});var n=K(T);n&&n.serverCertificate&&0<n.serverCertificate.length&&v.setServerCertificate(E.decodeArray(n.serverCertificate).buffer);for(var r,s=0;s<c.length;s++)for(o=0;o<c[s].length;o++)if(T===c[s][o].ks){p.isClearKey(T)&&n&&n.hasOwnProperty("clearkeys")&&(r={kids:Object.keys(n.clearkeys)},c[s][o].initData=(new TextEncoder).encode(JSON.stringify(r))),c[s][o].sessionId?f(c[s][o].sessionId,c[s][o].initData):null!==c[s][o].initData&&d(c[s][o].initData,c[s][o].cdmData);break}}};R.on(D.INTERNAL_KEY_SYSTEM_SELECTED,r,a),R.on(D.KEY_SYSTEM_ACCESS_COMPLETE,u,a),v.requestKeySystemAccess(t)}(n,e):T?function(t,n){var r=this,e=[],s=t.findIndex(function(e){return e.ks===T});if(-1===s||!t[s].initData)return;if(l(k.default.getPSSHForKeySystem(T,t[s].initData)))return;e.push({ks:t[s].ks,configs:[S(T)]});function i(e){R.off(D.KEY_SYSTEM_ACCESS_COMPLETE,i,r),e.error?n||R.trigger(D.KEY_SYSTEM_SELECTED,{error:new U.default(P.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,P.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)}):(M.info("DRM: KeySystem Access Granted"),R.trigger(D.KEY_SYSTEM_SELECTED,{data:e.data}),e=K(T),p.isClearKey(T)&&e&&e.hasOwnProperty("clearkeys")&&(e={kids:Object.keys(e.clearkeys)},t[s].initData=(new TextEncoder).encode(JSON.stringify(e))),t[s].sessionId?f(t[s].sessionId,t[s].initData):t[s].initData&&d(t[s].initData,t[s].cdmData))}R.on(D.KEY_SYSTEM_ACCESS_COMPLETE,i,r),v.requestKeySystemAccess(e)}(n,e):c.push(n)}function O(e,t){R.trigger(D.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function h(e){e.error?R.trigger(D.KEY_STATUSES_CHANGED,{data:null,error:e.error}):M.debug("DRM: key status = "+e.status)}function w(e){M.debug("DRM: onKeyMessage");var t=e.data;R.trigger(D.KEY_MESSAGE,{data:t});var r=t.messageType?t.messageType:"license-request",n=t.message,s=t.sessionToken,i=K(T),a=T?T.systemString:null,o=p.getLicenseServer(T,i,r),u={sessionToken:s,messageType:r};if(n&&0!==n.byteLength){if(!o)return M.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+s.getSessionID()),void O(u);if(p.isClearKey(T)){var l=p.processClearKeyLicenseRequest(T,i,n);if(l)return M.debug("DRM: ClearKey license request handled by application!"),O(u),void v.updateKeySession(s,l)}var E,c,d,f,y,S,_,g,h,t=null;i&&i.serverURL?"string"==typeof(l=i.serverURL)&&""!==l?t=l:"object"==typeof l&&l.hasOwnProperty(r)&&(t=l[r]):t=i&&i.laURL&&""!==i.laURL?i.laURL:p.isClearKey(T)?T.getLicenseServerUrlFromMediaInfo(C):(_=k.default.getPSSHData(s.initData),(t=T.getLicenseServerURLFromInitData(_))||e.data.laURL),(t=o.getServerURLFromMessage(t,n,r))?(c=!(E={}),_=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(c=!0),E[t]=e[t]},i&&_(i.httpRequestHeaders),_(T.getRequestHeadersFromMessage(n)),i&&"boolean"==typeof i.withCredentials&&(c=i.withCredentials),d=function(e,t,n,r){r=e.response?o.getErrorResponse(e.response,n,r):"NONE";O(t,new U.default(P.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,P.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+r))},f=function(t){var n;v&&(200===t.status?(n=new G.default(t.responseURL,F.default.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),t.response),N(I,n).then(function(){var e=o.getLicenseMessage(n.data,a,r);null!==e?(O(u),v.updateKeySession(s,e)):d(t,u,a,r)})):d(t,u,a,r))},y=function(e){O(u,new U.default(P.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,P.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+a+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},S=function(e){O(u,new U.default(P.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,P.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+a+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},e=T.getLicenseRequestFromMessage(n),_=o.getHTTPMethod(r),n=o.getResponseType(a,r),g=i&&!isNaN(i.httpTimeout)?i.httpTimeout:8e3,i=s.getSessionID()||null,h=new x.default(t,_,n,E,c,r,i,e),N(A,h).then(function(){!function e(t,n,r,s,i,a){var o=new XMLHttpRequest;var u=m.getQueryParameter({url:t.url,type:j.HTTPRequest.LICENSE});u&&(t.url=F.default.addAditionalQueryParameterToUrl(t.url,[u]));o.open(t.method,t.url,!0);o.responseType=t.responseType;o.withCredentials=t.withCredentials;0<r&&(o.timeout=r);for(var l in t.headers)o.setRequestHeader(l,t.headers[l]);var E=function(){n--,setTimeout(function(){e(t,n,r,s,i,a)},1e3)};o.onload=function(){200===this.status||n<=0?s(this):(M.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+n),E())};o.ontimeout=o.onerror=function(){n<=0?a(this):(M.warn("License request network request failed . Retrying it... Pending retries: "+n),E())};o.onabort=function(){i(this)};R.trigger(D.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId});o.send(t.data)}(h,3,g,f,y,S)})):O(u,new U.default(P.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,P.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else O(u,new U.default(P.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,P.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function b(e,t){if(M.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===C.length&&(M.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))s.push(setTimeout(function(){b(e,t)},500));else{var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),T){var r=k.default.getPSSHForKeySystem(T,n);if(r&&l(r))return}M.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));n=p.getSupportedKeySystems(n,i);0!==n.length?g(n,!1):M.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else M.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}function N(e,n){return e?e.reduce(function(e,t){return e.then(function(){return t(n)})},Promise.resolve()):Promise.resolve()}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");a(),R.on(D.INTERNAL_KEY_MESSAGE,w,this),R.on(D.INTERNAL_KEY_STATUS_CHANGED,h,this),C.push(e),(e=p.getSupportedKeySystemsFromContentProtection(e.contentProtection))&&0<e.length&&g(e,!0)},clearMediaInfoArrayByStreamId:function(t){C=C.filter(function(e){return e.streamInfo.id!==t})},createKeySession:d,loadKeySession:f,removeKeySession:function(e){a(),v.removeKeySession(e)},closeKeySession:function(e){a(),v.closeKeySession(e)},setServerCertificate:function(e){a(),v.setServerCertificate(e)},setMediaElement:y,setSessionType:function(e){r=e},setRobustnessLevel:function(e){u=e},setProtectionData:function(e){i=e,p.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return a(),p.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return p?p.getKeySystems():[]},setKeySystems:function(e){p&&p.setKeySystems(e)},setLicenseRequestFilters:function(e){A=e},setLicenseResponseFilters:function(e){I=e},stop:function(){v&&v.stop()},reset:function(){a(),A=[],I=[],R.off(D.INTERNAL_KEY_MESSAGE,w,this),R.off(D.INTERNAL_KEY_STATUS_CHANGED,h,this),y(null),T=void 0,v&&(v.reset(),v=null),s.forEach(function(e){return clearTimeout(e)}),s=[],C=[]}},M=n.getLogger(t),c=[],C=[],r="temporary",u="",A=[],I=[],t}s.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=n.default},{1:1,14:14,26:26,27:27,28:28,29:29,31:31,32:32,5:5}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(5)),E=r(e(10)),c=r(e(12)),d=r(e(13)),f=r(e(11)),y=r(e(19)),S=r(e(20)),_=r(e(21)),g=r(e(18)),h=r(e(4));function s(){var r=this.context,t=void 0,n=void 0,s=void 0,u=void 0,i=void 0,a=void 0,o=void 0;return t={initialize:function(){u=[];var e=(0,f.default)(r).getInstance({BASE64:i});u.push(e),e=(0,d.default)(r).getInstance({BASE64:i}),u.push(e),e=(0,E.default)(r).getInstance({BASE64:i}),u.push(e),a=e,e=(0,c.default)(r).getInstance({BASE64:i,debug:n}),u.push(e),o=e},setProtectionData:function(e){for(var t,n=0;n<u.length;n++){var r=u[n];r.hasOwnProperty("init")&&r.init((t=r.systemString,r=void 0,r=null,e&&(r=t in e?e[t]:null),r))}},isClearKey:function(e){return e===a||e===o},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),r=new Uint8Array(t),s=0;s<n.length;s++)if(n[s]!==r[s])return!1;return!0},getKeySystems:function(){return u},setKeySystems:function(e){u=e},getKeySystemBySystemString:function(e){for(var t=0;t<u.length;t++)if(u[t].systemString===e)return u[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,r=void 0,s=void 0,i=[];if(e)for(var a,o=l.default.findCencContentProtection(e),r=0;r<u.length;++r)for(n=u[r],s=0;s<e.length;++s){(t=e[s]).schemeIdUri.toLowerCase()===n.schemeIdURI&&(a=n.getInitData(t,o),i.push({ks:u[r],initData:a,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}))}return i},getSupportedKeySystems:function(e,t){for(var n,r=[],s=l.default.parsePSSHList(e),i=void 0,a=0;a<u.length;++a)n=(i=u[a]).systemString,n=!t||n in t,i.uuid in s&&n&&r.push({ks:i,initData:s[i.uuid],cdmData:i.getCDMData(),sessionId:i.getSessionId()});return r},getLicenseServer:function(e,t,n){return"license-release"===n||"individualization-request"===n?null:(n=null,t&&t.hasOwnProperty("drmtoday")?n=(0,y.default)(r).getInstance({BASE64:i}):e.systemString===h.default.WIDEVINE_KEYSTEM_STRING?n=(0,_.default)(r).getInstance():e.systemString===h.default.PLAYREADY_KEYSTEM_STRING?n=(0,S.default)(r).getInstance():e.systemString===h.default.CLEARKEY_KEYSTEM_STRING&&(n=(0,g.default)(r).getInstance()),n)},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return s.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,s=n.getLogger(t)),e.BASE64&&(i=e.BASE64))}}}s.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{10:10,11:11,12:12,13:13,18:18,19:19,20:20,21:21,4:4,5:5}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(24)),l=r(e(22)),i=r(e(5)),e=r(e(4)),a="e2719d58-a985-b3c9-781a-b030af78d30e",o=e.default.CLEARKEY_KEYSTEM_STRING,d="urn:uuid:"+a;function s(e){var s=(e=e||{}).BASE64,c={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};return{uuid:a,schemeIdURI:d,systemString:o,getInitData:function(e,t){try{var n,r=i.default.parseInitDataFromContentProtection(e,s);return!r&&t&&(n={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))).replace(/=/g,"")}catch(e){return null}}(t["cenc:default_KID"])]},r=(new TextEncoder).encode(JSON.stringify(n))),r}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e)))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getLicenseServerUrlFromMediaInfo:function(e){try{if(!e||0===e.length)return null;for(var t=0,n=null;t<e.length&&!n;){var r=e[t];if(r&&r.contentProtection&&0<r.contentProtection.length){var s=r.contentProtection.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===d});if(s&&0<s.length)for(var i=0;i<s.length&&!n;){for(var a=s[i],o=0;o<c.attributes.length&&!n;){for(var u=0,l=c.attributes[o];u<c.prefixes.length&&!n;){var E=c.prefixes[u];a[l]&&a[l].__prefix&&a[l].__prefix===E&&a[l].__text&&(n=a[l].__text),u+=1}o+=1}i+=1}}t+=1}return n}catch(e){return null}},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],i=0;i<r.kids.length;i++){var a=r.kids[i],o=e.clearkeys&&e.clearkeys.hasOwnProperty(a)?e.clearkeys[a]:null;if(!o)throw new Error("DRM: ClearKey keyID ("+a+") is not known!");s.push(new u.default(a,o))}n=new l.default(s)}return n}}}s.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{22:22,24:24,4:4,5:5}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(5)),e=r(e(4)),s="9a04f079-9840-4286-ab92-e65be0885f95",i=e.default.PLAYREADY_KEYSTEM_STRING,a=void 0;function o(e){var o="utf-16",l=(e=e||{}).BASE64;function E(){if(!l||!l.hasOwnProperty("decodeArray")||!l.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:s,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:i,getInitData:function(e){var t,n,r=new Uint8Array([112,115,115,104,0,0,0,0]),s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),i=0,a=null,o=void 0,u=void 0;if(E(),!e)return null;if("pssh"in e)return c.default.parseInitDataFromContentProtection(e,l);if("pro"in e)a=l.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;a=l.decodeArray(e.prheader.__text)}return t=a.length,n=4+r.length+s.length+4+t,e=new ArrayBuffer(n),o=new Uint8Array(e),(u=new DataView(e)).setUint32(0,n),i+=4,o.set(r,4),i+=r.length,o.set(s,i),i+=s.length,u.setUint32(i,t),i+=4,o.set(a,i),o.buffer},getRequestHeadersFromMessage:function(e){for(var t=void 0,n={},r=new DOMParser,e=new("utf-16"===o?Uint16Array:Uint8Array)(e),e=String.fromCharCode.apply(null,e),s=(t=r.parseFromString(e,"application/xml")).getElementsByTagName("name"),i=t.getElementsByTagName("value"),a=0;a<s.length;a++)n[s[a].childNodes[0].nodeValue]=i[a].childNodes[0].nodeValue;return n.hasOwnProperty("Content")&&(n["Content-Type"]=n.Content,delete n.Content),n.hasOwnProperty("Content-Type")||(n["Content-Type"]="text/xml; charset=utf-8"),n},getLicenseRequestFromMessage:function(e){var t=null,n=new DOMParser,r=new("utf-16"===o?Uint16Array:Uint8Array)(e);return E(),r=String.fromCharCode.apply(null,r),(r=n.parseFromString(r,"application/xml")).getElementsByTagName("PlayReadyKeyMessage")[0]?((r=r.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)&&(t=l.decode(r)),t):e},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,s=new DOMParser,i=0;i<n;i++){var a=t.getUint16(r,!0);r+=2;var o=t.getUint16(r,!0);if(r+=2,1===a){var u=e.slice(r,r+o),a=String.fromCharCode.apply(null,new Uint16Array(u)),u=s.parseFromString(a,"application/xml");if(u.getElementsByTagName("LA_URL")[0]){a=u.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(a)return a}if(u.getElementsByTagName("LUI_URL")[0]){u=u.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(u)return u}}else r+=o}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(E(),a&&a.cdmData){for(e=[],r=0;r<a.cdmData.length;++r)e.push(a.cdmData.charCodeAt(r)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=l.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),n=[],r=0;r<t.length;++r)n.push(t.charCodeAt(r)),n.push(0);return new Uint8Array(n).buffer}return null},getSessionId:function(e){return a&&a.sessionId?a.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');o=e},init:function(e){e&&(a=e)}}}o.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{4:4,5:5}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(24)),E=r(e(22)),s=r(e(5)),e=r(e(4)),i="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",a=e.default.CLEARKEY_KEYSTEM_STRING;function o(e){var t=e.BASE64,u=e.debug.getLogger(void 0);return{uuid:i,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:a,getInitData:function(e){return s.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],i=0;i<r.kids.length;i++){var a=r.kids[i],o=e.clearkeys&&e.clearkeys.hasOwnProperty(a)?e.clearkeys[a]:null;if(!o)throw new Error("DRM: ClearKey keyID ("+a+") is not known!");s.push(new l.default(a,o))}n=new E.default(s),u.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}o.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{22:22,24:24,4:4,5:5}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(5)),e=r(e(4)),i="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",a=e.default.WIDEVINE_KEYSTEM_STRING;function o(e){var t=null,n=(e=e||{}).BASE64;return{uuid:i,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:a,init:function(e){e&&(t=e)},getInitData:function(e){return s.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}o.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{4:4,5:5}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var s=e,i=t,a=n,r=!1;null===s&&(s=Function.prototype);var o=Object.getOwnPropertyDescriptor(s,i);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(a)}s=Object.getPrototypeOf(s);if(null===s)return;e=s,t=i,n=a,r=!0,o=void 0}};var s,i=e(2);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((s=i)&&s.__esModule?s:{default:s})["default"]),a);n.default=e,t.exports=n.default},{2:2}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(9)),R=r(e(30)),D=r(e(31)),m=r(e(23)),M=r(e(26)),C=r(e(25)),T=r(e(14));function s(e){e=e||{};var t=this.context,f=e.eventBus,y=e.events,n=e.debug,s=e.api,i=e.errHandler,r=void 0,a=void 0,S=void 0,o=void 0,_=void 0,u=void 0,l=void 0,E=void 0,c=void 0;function d(){S&&p();for(var e=0;e<l.length;e++)g(l[e]);f.trigger(y.TEARDOWN_COMPLETE)}function g(t){try{S[s.cancelKeyRequest](o.systemString,t.sessionID)}catch(e){f.trigger(y.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionID+") "+e.message})}}function h(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function p(){S.removeEventListener(s.keyerror,c),S.removeEventListener(s.needkey,c),S.removeEventListener(s.keymessage,c),S.removeEventListener(s.keyadded,c)}return r={getAllInitData:function(){for(var e=[],t=0;t<u.length;t++)e.push(u[t].initData);for(t=0;t<l.length;t++)e.push(l[t].initData);return e},requestKeySystemAccess:function(e){for(var t=(t=S)||document.createElement("video"),n=!1,r=0;r<e.length;r++)for(var s=e[r].ks.systemString,i=e[r].configs,a=null,o=null,u=0;u<i.length;u++){var l=i[u].videoCapabilities;if(l&&0!==l.length){o=[];for(var E=0;E<l.length;E++)""!==t.canPlayType(l[E].contentType,s)&&o.push(l[E])}if(o&&(!o||0!==o.length)){n=!0;var c=new M.default(a,o),d=_.getKeySystemBySystemString(s);f.trigger(y.KEY_SYSTEM_ACCESS_COMPLETE,{data:new C.default(d,c)});break}}n||f.trigger(y.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return o},selectKeySystem:function(e){o=e.keySystem,f.trigger(y.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(S!==e){if(S){p();for(var t=0;t<l.length;t++)g(l[t]);l=[]}(S=e)&&(S.addEventListener(s.keyerror,c),S.addEventListener(s.needkey,c),S.addEventListener(s.keymessage,c),S.addEventListener(s.keyadded,c),f.trigger(y.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!o)throw new Error("Can not create sessions until you have selected a key system");if(E||0===l.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return u.push(t),S[s.generateKeyRequest](o.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(_.isClearKey(o))for(var r=0;r<t.keyPairs.length;r++)S[s.addKey](o.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else S[s.addKey](o.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:g,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:d,reset:d},a=n.getLogger(r),u=[],l=[],_=(o=S=null,v.default)(t).getInstance(),c={handleEvent:function(e){var t=null;switch(e.type){case s.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;f.trigger(y.NEED_KEY,{key:new R.default(n,"cenc")});break;case s.keyerror:if(t=(t=h(l,e.sessionId))||h(u,e.sessionId)){var n=T.default.MEDIA_KEYERR_CODE,r="";switch(e.errorCode.code){case 1:n=T.default.MEDIA_KEYERR_UNKNOWN_CODE,r+="MEDIA_KEYERR_UNKNOWN - "+T.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:n=T.default.MEDIA_KEYERR_CLIENT_CODE,r+="MEDIA_KEYERR_CLIENT - "+T.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:n=T.default.MEDIA_KEYERR_SERVICE_CODE,r+="MEDIA_KEYERR_SERVICE - "+T.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:n=T.default.MEDIA_KEYERR_OUTPUT_CODE,r+="MEDIA_KEYERR_OUTPUT - "+T.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:n=T.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,r+="MEDIA_KEYERR_HARDWARECHANGE - "+T.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:n=T.default.MEDIA_KEYERR_DOMAIN_CODE,r+="MEDIA_KEYERR_DOMAIN - "+T.default.MEDIA_KEYERR_DOMAIN_MESSAGE}r+="  System Code = "+e.systemCode,f.trigger(y.KEY_ERROR,{data:new D.default(n,r,t)})}else a.error("No session token found for key error");break;case s.keyadded:(t=(t=h(l,e.sessionId))||h(u,e.sessionId))?(a.debug("DRM: Key added."),f.trigger(y.KEY_ADDED,{data:t})):a.debug("No session token found for key added");break;case s.keymessage:(E=null!==e.sessionId&&void 0!==e.sessionId)?!(t=h(l,e.sessionId))&&0<u.length&&(t=u.shift(),l.push(t),t.sessionID=e.sessionId,f.trigger(y.KEY_SESSION_CREATED,{data:t})):0<u.length&&(t=u.shift(),l.push(t),0!==u.length&&i.error(new D.default(T.default.MEDIA_KEY_MESSAGE_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t?(r=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,t.keyMessage=r,f.trigger(y.INTERNAL_KEY_MESSAGE,{data:new m.default(t,r,e.defaultURL)})):a.warn("No session token found for key message")}}},r}s.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=n.default},{14:14,23:23,25:25,26:26,30:30,31:31,9:9}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var g=r(e(9)),h=r(e(30)),p=r(e(14)),v=r(e(31)),R=r(e(23)),D=r(e(25)),m=r(e(4));function s(e){e=e||{};var t=this.context,a=e.eventBus,o=e.events,n=e.debug,r=void 0,u=void 0,l=void 0,s=void 0,E=void 0,c=void 0,i=void 0,d=void 0;function f(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function y(e){for(var t=0;t<c.length;t++)if(c[t]===e){c.splice(t,1);break}}function S(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function _(t,e,n,r){var s={session:t,initData:e,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":a.trigger(o.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=S(arguments);"expired"===e.status?a.trigger(o.INTERNAL_KEY_STATUS_CHANGED,{error:new v.default(p.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,p.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):a.trigger(o.INTERNAL_KEY_STATUS_CHANGED,e)});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;a.trigger(o.INTERNAL_KEY_MESSAGE,{data:new R.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return t.sessionId},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===S(arguments).status&&(e=!0)}),e},getSessionType:function(){return n}};return t.addEventListener("keystatuseschange",s),t.addEventListener("message",s),t.closed.then(function(){y(s),u.debug("DRM: Session closed.  SessionID = "+s.getSessionID()),a.trigger(o.KEY_SESSION_CLOSED,{data:s.getSessionID()})}),c.push(s),s}return r={getAllInitData:function(){for(var e=[],t=0;t<c.length;t++)c[t].initData&&e.push(c[t].initData);return e},requestKeySystemAccess:function(e){!function s(i,e){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void a.trigger(o.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(t){var n=i[t].ks,e=i[t].configs,r=n.systemString;r===m.default.PLAYREADY_KEYSTEM_STRING&&"required"===e[0].persistentState&&(r+=".recommendation"),navigator.requestMediaKeySystemAccess(r,e).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,t=new D.default(n,t);t.mksa=e,a.trigger(o.KEY_SYSTEM_ACCESS_COMPLETE,{data:t})}).catch(function(e){++t<i.length?s(i,t):a.trigger(o.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+e.message})})}(e)}(e,0)},getKeySystem:function(){return l},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){l=t.keySystem,E=e,s?s.setMediaKeys(E).then(function(){a.trigger(o.INTERNAL_KEY_SYSTEM_SELECTED)}):a.trigger(o.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){a.trigger(o.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){s!==e&&(s&&(s.removeEventListener("encrypted",i),s.setMediaKeys&&s.setMediaKeys(null)),(s=e)&&(s.addEventListener("encrypted",i),s.setMediaKeys&&E&&s.setMediaKeys(E)))},setServerCertificate:function(e){if(!l||!E)throw new Error("Can not set server certificate until you have selected a key system");E.setServerCertificate(e).then(function(){u.info("DRM: License server certificate successfully updated."),a.trigger(o.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){a.trigger(o.SERVER_CERTIFICATE_UPDATED,{error:new v.default(p.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,p.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e,t,n){if(!l||!E)throw new Error("Can not create sessions until you have selected a key system");var r=E.createSession(n),s=_(r,e,n),t=this.getKeySystem().systemString===m.default.CLEARKEY_KEYSTEM_STRING&&(e||t&&t.clearkeys)?"keyids":"cenc";r.generateRequest(t,e).then(function(){u.debug("DRM: Session created.  SessionID = "+s.getSessionID()),a.trigger(o.KEY_SESSION_CREATED,{data:s})}).catch(function(e){y(s),a.trigger(o.KEY_SESSION_CREATED,{data:null,error:new v.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(t,e){var n=t.session;d.isClearKey(l)&&(e=e.toJWK()),n.update(e).catch(function(e){a.trigger(o.KEY_ERROR,{data:new v.default(p.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(t,e,n){if(!l||!E)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<c.length;r++)if(t===c[r].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var s=E.createSession(n),i=_(s,e,n,t);s.load(t).then(function(e){e?(u.debug("DRM: Session loaded.  SessionID = "+i.getSessionID()),a.trigger(o.KEY_SESSION_CREATED,{data:i})):(y(i),a.trigger(o.KEY_SESSION_CREATED,{data:null,error:new v.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){y(i),a.trigger(o.KEY_SESSION_CREATED,{data:null,error:new v.default(p.default.KEY_SESSION_CREATED_ERROR_CODE,p.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){u.debug("DRM: Session removed.  SessionID = "+t.getSessionID()),a.trigger(o.KEY_SESSION_REMOVED,{data:t.getSessionID()})},function(e){a.trigger(o.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name})})},closeKeySession:function(t){f(t).catch(function(e){y(t),a.trigger(o.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name})})},stop:function(){for(var e=void 0,t=0;t<c.length;t++)(e=c[t]).getUsable()||f(e).catch(function(){y(e)})},reset:function(){var n=c.length,r=void 0;0!==n?function(){for(var t=function(e){y(e),0===c.length&&(s?(s.removeEventListener("encrypted",i),s.setMediaKeys(null).then(function(){a.trigger(o.TEARDOWN_COMPLETE)})):a.trigger(o.TEARDOWN_COMPLETE))},e=0;e<n;e++)!function(e){r.session.closed.then(function(){t(e)}),f(r).catch(function(){t(e)})}(r=c[e])}():a.trigger(o.TEARDOWN_COMPLETE)}},u=n.getLogger(r),c=[],d=(E=s=l=null,g.default)(t).getInstance(),i={handleEvent:function(e){var t;"encrypted"===e.type&&e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,a.trigger(o.NEED_KEY,{key:new h.default(t,e.initDataType)}))}},r}s.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=n.default},{14:14,23:23,25:25,30:30,31:31,4:4,9:9}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(9)),p=r(e(30)),v=r(e(31)),R=r(e(14)),D=r(e(23)),m=r(e(26)),M=r(e(25));function s(e){e=e||{};var t=this.context,y=e.eventBus,S=e.events,n=e.debug,_=e.api,r=void 0,i=void 0,s=void 0,a=void 0,o=void 0,u=void 0,l=void 0,E=void 0,g=void 0;function c(){try{for(var e=0;e<l.length;e++)d(l[e]);s&&s.removeEventListener(_.needkey,E),y.trigger(S.TEARDOWN_COMPLETE)}catch(e){y.trigger(S.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function d(e){var t=e.session;t.removeEventListener(_.error,e),t.removeEventListener(_.message,e),t.removeEventListener(_.ready,e),t.removeEventListener(_.close,e);for(var n=0;n<l.length;n++)if(l[n]===e){l.splice(n,1);break}t[_.release]()}function f(){function e(){s.removeEventListener("loadedmetadata",t),s[_.setMediaKeys](o),y.trigger(S.VIDEO_ELEMENT_SELECTED)}var t=null;1<=s.readyState?e():(t=e.bind(this),s.addEventListener("loadedmetadata",t))}return r={getAllInitData:function(){for(var e=[],t=0;t<l.length;t++)e.push(l[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,s=e[n].configs,i=null,a=null,o=0;o<s.length;o++){var u=s[o].audioCapabilities,l=s[o].videoCapabilities;if(u&&0!==u.length){i=[];for(var E=0;E<u.length;E++)window[_.MediaKeys].isTypeSupported(r,u[E].contentType)&&i.push(u[E])}if(l&&0!==l.length){a=[];for(var c=0;c<l.length;c++)window[_.MediaKeys].isTypeSupported(r,l[c].contentType)&&a.push(l[c])}if(!(!i&&!a||i&&0===i.length||a&&0===a.length)){t=!0;var d=new m.default(i,a),f=g.getKeySystemBySystemString(r);y.trigger(S.KEY_SYSTEM_ACCESS_COMPLETE,{data:new M.default(f,d)});break}}t||y.trigger(S.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return a},selectKeySystem:function(e){try{o=e.mediaKeys=new window[_.MediaKeys](e.keySystem.systemString),a=e.keySystem,u=e,s&&f(),y.trigger(S.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){y.trigger(S.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+a.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){s!==e&&(s&&s.removeEventListener(_.needkey,E),(s=e)&&(s.addEventListener(_.needkey,E),o&&f()))},createKeySession:function(e,t,n,r){if(!a||!o||!u)throw new Error("Can not create sessions until you have selected a key system");var s=null;if(u.ksConfiguration.videoCapabilities&&0<u.ksConfiguration.videoCapabilities.length&&(s=u.ksConfiguration.videoCapabilities[0]),null===s&&u.ksConfiguration.audioCapabilities&&0<u.ksConfiguration.audioCapabilities.length&&(s=u.ksConfiguration.audioCapabilities[0]),null===s)throw new Error("Can not create sessions for unknown content types.");s=s.contentType,r=o.createSession(s,new Uint8Array(e),r?new Uint8Array(r):null),e={session:r,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case _.error:y.trigger(S.KEY_ERROR,{data:new v.default(R.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case _.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;y.trigger(S.INTERNAL_KEY_MESSAGE,{data:new D.default(this,t,e.destinationURL)});break;case _.ready:i.debug("DRM: Key added."),y.trigger(S.KEY_ADDED);break;case _.close:i.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),y.trigger(S.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}},r.addEventListener(_.error,e),r.addEventListener(_.message,e),r.addEventListener(_.ready,e),r.addEventListener(_.close,e),l.push(e),i.debug("DRM: Session created.  SessionID = "+e.getSessionID()),y.trigger(S.KEY_SESSION_CREATED,{data:e})},updateKeySession:function(e,t){e=e.session,g.isClearKey(a)?e.update(new Uint8Array(t.toJWK())):e.update(new Uint8Array(t))},closeKeySession:d,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:c,reset:c},i=n.getLogger(r),l=[],g=(u=o=a=s=null,h.default)(t).getInstance(),E={handleEvent:function(e){e.type===_.needkey&&e.initData&&(e=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,y.trigger(S.NEED_KEY,{key:new p.default(e,"cenc")}))}},r}s.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=n.default},{14:14,23:23,25:25,26:26,30:30,31:31,9:9}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(24)),a=r(e(22));function s(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],s=r.kid.replace(/=/g,""),r=r.k.replace(/=/g,"");t.push(new i.default(s,r))}return new a.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}s.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{22:22,24:24}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,s=e(4),i=(r=s)&&r.__esModule?r:{default:r};function a(e){var n=(e=e||{}).BASE64,r={};r[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,t){return function(){if(!n||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),r[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}a.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default},{4:4}],20:[function(e,t,n){"use strict";function r(){var o="http://schemas.xmlsoap.org/soap/envelope/";function u(e){e=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=u(e),t=(new window.DOMParser).parseFromString(t,"text/xml"),t=t?t.getElementsByTagNameNS(o,"Envelope")[0]:null,t=t?t.getElementsByTagNameNS(o,"Body")[0]:null;if(t?t.getElementsByTagNameNS(o,"Fault")[0]:null)return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",r="";if(window.DOMParser){var s=u(e),i=(new window.DOMParser).parseFromString(s,"text/xml"),a=i?i.getElementsByTagNameNS(o,"Envelope")[0]:null,e=a?a.getElementsByTagNameNS(o,"Body")[0]:null,i=e?e.getElementsByTagNameNS(o,"Fault")[0]:null,a=i?i.getElementsByTagName("detail")[0]:null,e=a?a.getElementsByTagName("Exception")[0]:null,a=null;if(null===i)return s;t=(a=i.getElementsByTagName("faultstring")[0].firstChild)?a.nodeValue:null,null!==e&&(n=(a=e.getElementsByTagName("StatusCode")[0])?a.firstChild.nodeValue:null,e=(r=(a=e.getElementsByTagName("Message")[0])?a.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,a=r?r.indexOf("]"):-1,r=r?r.substring(e,a):"")}return t="code: "+n+", name: "+t,r&&(t+=", message: "+r),t}.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],21:[function(e,t,n){"use strict";function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],22:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var s=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"toJWK",value:function(){for(var e=void 0,t=this.keyPairs.length,n={keys:[]},e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var s=JSON.stringify(n),i=s.length,a=new ArrayBuffer(i),o=new Uint8Array(a);for(e=0;e<i;e++)o[e]=s.charCodeAt(e);return a}}]),i);function i(e,t){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}n.default=s,t.exports=n.default},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function s(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=r||"license-request"}n.default=s,t.exports=n.default},{}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.keyID=e,this.key=t}n.default=r,t.exports=n.default},{}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.keySystem=e,this.ksConfiguration=t}n.default=r,t.exports=n.default},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t,n,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),t&&t.length&&(this.videoCapabilities=t),this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=s}n.default=i,t.exports=n.default},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function u(e,t,n,r,s,i,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.url=e,this.method=t,this.responseType=n,this.headers=r,this.withCredentials=s,this.messageType=i,this.sessionId=a,this.data=o}n.default=u,t.exports=n.default},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.url=e,this.headers=t,this.data=n}n.default=r,t.exports=n.default},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.contentType=e,this.robustness=t}n.default=r,t.exports=n.default},{}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.initData=e,this.initDataType=t}n.default=r,t.exports=n.default},{}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.code=e||null,this.message=t||null,this.data=n||null}n.default=r,t.exports=n.default},{}],32:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function s(){r(this,s),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null}function i(){r(this,i),this.s=null,this.d=null,this.b=[]}s.GET="GET",s.HEAD="HEAD",s.MPD_TYPE="MPD",s.XLINK_EXPANSION_TYPE="XLinkExpansion",s.INIT_SEGMENT_TYPE="InitializationSegment",s.INDEX_SEGMENT_TYPE="IndexSegment",s.MEDIA_SEGMENT_TYPE="MediaSegment",s.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",s.LICENSE="license",s.OTHER_TYPE="other",n.HTTPRequest=s,n.HTTPRequestTrace=i},{}]},{},[6])(6)});
//# sourceMappingURL=dash.protection.min.js.map